.TH dtlp 1 "12 August 1994"
.\" CDE Common Source Format, Version 1.0.0
.\" *************************************************************************
.\" **  (c) Copyright 1993, 1994 Hewlett-Packard Company
.\" **  (c) Copyright 1993, 1994 International Business Machines Corp.
.\" **  (c) Copyright 1993, 1994 Sun Microsystems, Inc.
.\" **  (c) Copyright 1993, 1994 Novell, Inc.
.\" *************************************************************************
.SH NAME
dtlp \- gather lp arguments and print a file
.SH SYNOPSIS
.yS
\f3dtlp\f1
[\f3-b\f2 banner_title\f1]
[\f3-d\f2 lpdest\f1]
[\f3-m\f2 print_command\f1]
[\f3-n\f2 copy_count\f1]
[\f3-o\f2 other_options\f1]
[\f3-u\f2 user_filename\f1]
[\f3-a\f1]
[\f3-e\f1]
[\f3-h\f1]
[\f3-r\f1]
[\f3-s\f1]
[\f3-v\f1]
[\f3-w\f1]
[\f2print_file\f1]
.yE
.SH DESCRIPTION
The 
.Cm dtlp
command line utility is a front-end to the 
.B lp
subsystem.
The
.Cm dtlp
utility
gathers 
.B lp
print options and prints a specified
file.
It operates in two modes:
.VL 15
.LI "\f3GUI mode\f1"
By default,
.Cm dtlp
posts a 
.B Print
dialog that appears with \f3Print\f1,
\f3Cancel\f1, and \f3Help\f1 pushbuttons. 
.LI "\f3Silent mode\f1"
When invoked with the \f2silent\f1 flag,
.Cm dtlp
does not present the GUI input dialog.
It collects input arguments from the command line and environment
variables.
.LE
.HU "The Print Dialog"
When invoked normally, 
.Cm dtlp
posts a 
.B Print
dialog that shows:
.VL 15
.LI \f3File\f1
The name of the file to print (a read-only text label).
.LI \f3Printer\f1
The printer device. 
The default is the value of the \f2LPDEST\f1 environment variable.
If
\f2LPDEST\f1 is unset, then the properly localized default printer string
appears in the text field, if it exists.
.LI \f3Copies\f1
The number of copies to print.
The default is 1.
.LI "\f3Banner Page Title\f1"
The title to appear on the printed banner page,
and if formatted, in the header of each page.
.LI "\f3Print Page Numbers\f1"
A checkbox to indicate
whether the file should be printed formatted (run through the
\f3pr -f\f1 command) or printed unformatted.
.LI "\f3Print Command Options\f1"
Any options to be passed directly to the
.B lp
command.
For example, some implementations support the \f3-o2\f1
option to
.B lp
to enable double-page printing.
.P
When the user presses the \f3Print\f1 button, these settings are
passed onto the
.B lp
subsystem,
along with the values of any other environment settings (see the
\f3ENVIRONMENT\f1 heading in this man page).
.LE
.SH OPTIONS
The
.Cm dtlp
command accepts a \f2print_file\f1 name specification.
If a 
\f2print_file\f1 is not specified, standard input is assumed.
When used in
this fashion, the \f3-u\f2 user_filename\f1 option can be used to
pass a name to 
.Cm dtlp
for display in the 
.B Print
dialog.
.HU "Command Line Options and the ENVIRONMENT Setting"
The
.Cm dtlp
command
is sensitive to some ENVIRONMENT settings.
In the case in which both a command line option and a
complementary environment 
setting are
specified, the command line option takes precedence.
.HU "Command Line Options"
.VL 15
.LI "\-b  banner_title"
Set the string used in printing the banner on the title page.
If the \f3-r\f1 option is also specified, then print this same string
on the page headers.
.LI "\-d  lpdest"
Set the printer destination for the file.
.LI "\-m  print_command"
Use this value as the path name of the 
.B lp
print command.
The default is
\f3lp\f1.
.LI "\-n  copy_count"
Print this many copies.
Default is 1.
.LI "\-o  other_options"
Pass these options directly through to the
\f3print_command\f1, without any interpretation.
This setting is 
intended for users with advanced printing knowledge.
.LI "\-u  user_filename"
Use this value as the name of file as it should appear in the
.B Print
dialog or print output.
Default is \f3print_file\f1.
Equivalent to the \f2DTPRINTUSERFILENAME\f1
setting under the \f3ENVIRONMENT\f1 heading in this man page.
.LI \-a
Causes the file to be formatted with the \f3man\f1
command.
If set, then other formatting specifications (such
as \f3-r\f1) are ignored.
.LI \-e
Remove the file after printing it.
This functionality is intended for temporary files generated by
applications that
don't need to persist beyond the act of printing.
Equivalent to the \f2DTPRINTFILEREMOVE\f1.
.LI \-h
Print out a help message.
.LI \-r
Format the file before printing it, by running it through
the \f3pr -f\f1 command.
.LI \-s
Print the file silently, without posting the
.B Print
dialog.  
Equivalent to the \f2DTPRINTSILENT\f1
setting under the \f3ENVIRONMENT\f1 heading in this man page.
.LI \-v
Print out verbose messages during the print process.
.LI \-w
Causes output to the printer to be sent raw, with no
interpretation of tabs, backspaces, formfeeds, and
binary characters.
Useful for printing \f3PCL\f1 and \f3PS\f1 files.
If set, then other formatting specifications (such
as \f3-r\f1) are ignored; however, the \f3-a\f1 option
will take precedence over this setting.
.LI  print_file
Print this file.
If \f2print_file\f1
is not supplied, standard input is assumed.
.LE
.SH ENVIRONMENT
Following are the names and meanings
of the environment values that affect the operation of
\f3dtlp\f1:
.VL 15
.LI \f2LANG\f1
Use the specified value to determine the locale of the message strings that 
appear in the
.B Print
dialog.
.LI \f2LPDEST\f1
Use the specified value as the printer destination for the file.
.LI \f2DTPRINTCWD\f1
If set to an existing, usable directory, this setting
causes
.Cm dtlp
to execute the
.B lp
command pipeline from that
directory.
By default, uses the current directory
from which 
.Cm dtlp
is invoked.
.LI \f2DTPRINTFILEREMOVE\f1
Equivalent to the \f3-e\f1
command line setting.
Value must be \f3True\f1
or \f3False\f1 (case is ignored).
Default is \f3False\f1.
.LI \f2DTPRINTSILENT\f1
Equivalent to the \f3-s\f1
command line setting.
Value must be \f3True\f1
or \f3False\f1 (case is ignored).
Default is \f3False\f1.
.LI \f2DTPRINTUSERFILENAME\f1
Equivalent to the \f3-u\f1
command line setting.
.LE
.HU "Reconciling Options"
In the case of conflicting formatting options,
.Cm dtlp
uses the following decisions to reconcile them:
.VL
.LI \(bu
If any \f2raw\f1
(as with \f3-w\f1), or \f2man\f1 (as with
\f3-a\f1)
options are specified, all
other page formatting and numbering options are turned off;
otherwise, page printing and formatting are allowed.
.LI \(bu
In a formatted operation:
If a banner title is specified (as with
\f3-b\f1), it will be used
as the page header.
.LI \(bu
If a user filename is specified (as with 
\f3-u\f1 or
\f2DTPRINTUSERFILENAME\f1), it will be used as the page
header;
otherwise, the filename itself will be used as the page header.
.LE
.SH "RETURN VALUES"
.VL 15
.LI 0
Command completed successfully.
.LI -1
The user pressed the \f3Cancel\f1 button.
.LI 2
Usage error.
.LI 3
There is no specified file to print.
.LI 4
Unable to find the \f3dtksh\f1 initialization file,
\f3/usr/dt/scripts/DtFuncs.sh\f1.
.LI 5
The file is an invalid file (for example, a directory or a device file).
.LI 6
The user has no read permission on the file.
.LE
.SH EXAMPLES
.HU "Command Line"
The following command line causes
.Cm dtlp
to post a 
.B Print
dialog
for \f3file1\f1 with a name displayed of
\f3Your File\f1 and with the default printer chosen:
.br
\f3/usr/dt/bin/dtlp -u "Your File" file1\f1
.sp 1
The following command line causes
.Cm dtlp
to silently print two copies of \f3file2\f1 on printer 
\f3laser3\f1:
.br
\f3/usr/dt/bin/dtlp -n 2 -d laser3 -s file2\f1
.HU "Action Definition"
The following \f3Print\f1 action would cause a \f3PCL\f1 file to 
be printed using the
.Cm dtlp
command.
.Cs I
ACTION Print
{
        LABEL           Print
        ARG_TYPE        PCL
        TYPE            COMMAND
        WINDOW_TYPE     NO_STDIO
        EXEC_STRING     /usr/dt/bin/dtlp -w %Arg_1%
}
.Ce
.sp 1
The following \f3Print\f1 action would cause a man page file to 
be printed using the
.Cm dtlp
command.
.Cs I
ACTION Print
{
        LABEL           Print
        ARG_TYPE        MAN_PAGE
        TYPE            COMMAND
        WINDOW_TYPE     NO_STDIO
        EXEC_STRING     /usr/dt/bin/dtlp -a %Arg_1%
}
.Ce
.sp 1
By default,
these actions will post the
.B Print
dialog.
.SH "LOCALES AND CODESETS"
The strings that appear in the
.B Print
dialog are localizable.
.SH FILES
.VL 15
.LI \f3/usr/dt/appconfig/types/C/print.dt\f1
Defines the default system \f3Print\f1 action.
.LI \f3/usr/dt/appconfig/types/C/dt.dt\f1
Defines the default \f3Print\f1 actions for
man pages (type \f3MAN\f1), ASCII files (type \f3TEXTFILE\f1),
PCL files (type \f3PCL\f1), and PS files (type \f3POSTSCRIPT\f1).
.LI \f3/etc/dt/appconfig/types/C/*.dt\f1
The datatype files that implement the per-printer \f3Print\f1
action; these are created by the \f3dtprintinfo -populate\f1 command.
.LI \f3/usr/dt/scripts/DtFuncs.sh\f1
The \f3dtksh\f1 initialization file that defines a number
of GUI convenience functions, as for creating a dialog box.
.LE
.SH BUGS
The 
.Cm dtlp
.B Print
dialog cannot accept quote marks (either \f3'\f1 or \f3"\f1)
in the \f3Banner Page Title\f1 text field.
.SH "SEE ALSO"
.BR dtsearchpath (1),
.BR dtprintinfo (1).





